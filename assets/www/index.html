<!DOCTYPE html>
<html>
<head>
	<title>RescueMakati</title>
	<meta charset="utf-8" />
  	<meta name="format-detection" content="telephone=no" />
  	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<!-- <link rel="stylesheet" href="assets/css/bootstrap.min.css" type="text/css"> -->
	<link rel="stylesheet" href="assets/css/font.css" type="text/css">
	<link rel="stylesheet" href="assets/css/holo-dark/base.css">
	<link rel="stylesheet" href="assets/css/holo-dark/action-bars.css"> 
	<link rel="stylesheet" href="assets/css/holo-dark/animations.css">
	<link rel="stylesheet" href="assets/css/holo-dark/buttons.css">
	<link rel="stylesheet" href="assets/css/holo-dark/content.css">
	<link rel="stylesheet" href="assets/css/holo-dark/dialogs.css">
	<link rel="stylesheet" href="assets/css/holo-dark/forms.css">
	<link rel="stylesheet" href="assets/css/holo-dark/icomoon.css">
	<link rel="stylesheet" href="assets/css/holo-dark/lists.css">
	<link rel="stylesheet" href="assets/css/holo-dark/sliders.css">
	<link rel="stylesheet" href="assets/css/holo-dark/spinners.css">
	<link rel="stylesheet" href="assets/css/holo-dark/stack.css">
	<link rel="stylesheet" href="assets/css/holo-dark/tabs.css">
	<link rel="stylesheet" href="assets/css/holo-dark/toasts.css"> 
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
	
	<!--Custom CSS-->
	<style type="text/css">
		.content{
			color:black;
    		background-color:white;
			/*background: url("assets/images/binding_light/binding_light.png");*/
		}
		body .page{
			background: #FFF;
			color:#000;
		}

		header a i {
			color:white; 
			margin-top:5px;
		}
		
		.info-div, .hotlines-div{
			display: none;
			color:black;
		}
		.home-div{
			height:100%;
		}
		#map-canvas{
		  	margin: 0;
	        padding: 0;
	        height: 50%;
	      
		}
		.ebutton{
			text-align: center;
			width:99%;
		}
		.info-div form label, .info-div form , .info-div form .flex-group input, .info-div form .flex-group ::-webkit-input-placeholder, .info-div form input::-webkit-input-placeholder {
			color: black;
		}
		.black{
			color: black;
		}
	</style>

</head>

<body>
<!--page-->
 <div class="page">

 	<!--header-->
 	
 	<header class="action-bar fixed-top">
 	<a href="javascript: void(0);" class="app-icon action">
 	  <i style="" class="fa fa-plus-square fa-lg"></i>
 	</a>
 	  <h1 class="title"> &nbsp;RescueMakati</h1>
 	  <ul class="actions pull-right" style="margin-top:-2px;">

 	  <li><a href="" class="" title="">&nbsp;</a></li>
 	  <li><a href="" class="action" title="">&nbsp;</a></li>
 	  <li><a href="" class="action" title="About us"><i class="fa fa-rocket fa-lg"></i></a></li>
 	  <li><a href="" class="action" title="Signout"><i class="fa fa-sign-out fa-lg"></i></a></li>
 	  	
 	  </ul>
 	</header>

 	<!--tab-->
    <nav class="tab-fixed">
	    <ul class="tab-inner">
	      <li  class="active"><a id="tab1" class="tab" data-tab="tab1" data-ignore="true">Home</a></li>
	      <li  class=""><a id="tab2" class="tab" data-tab="tab2" >Info</a></li>
	      <li  class=""><a id="tab3" class="tab"  data-tab="tab3">Hotlines</a></li>
	    </ul>
    </nav>
    
    <!--content -->
    <div class="content" >
    	
    	<!--Content of Home-->
    	
    	<div class="home-div" style="margin:0px; max-height:800px;">
    	
    		<!--Map Container-->
    		 <div id="map-canvas"></div>

    		 <!--Address Container-->
    		 <div style=" border-top: 5px solid #393696; border-bottom: 5px solid #393696;text-align:center;  max-height:15%; padding:5px; background-color:#7976D6;">
    		 <span><i class="fa fa-location-arrow"></i><small id="location" style="padding:0px;"></small></span>
    		 </div>

    		 <b style="display:block; margin-left:10px"><i class="fa fa-exclamation-circle"></i> Choose a type of Emergency:</b>
    		 <center>
    		 <button class="btn ambulance-btn ebutton" style=""><i class="fa fa-h-square">&nbsp;</i>Ambulance</button><br>
    		 <button class="btn police-btn ebutton" style="" ><i class="fa fa-shield">&nbsp;</i>Police</button><br>
    		 <button class="btn fire-truck-btn ebutton" style=" "><i class="fa fa-fire">&nbsp;</i>Fire Truck</button><br> 
    		</center>
    		 
    		
    	</div>

    	<!--Content of Info-->
    	<div class="info-div" >
    	
    		<form class="form-flex inset" >
    		  <label class="block-label">Personal Info</label>
    		  <div class="flex-group">
    		    <input type="text" placeholder="Full Name" class="input-text flex1">
    		    <input style="width:30%;" type="age" maxlength="2"  placeholder="Age" class="input-text flex1">
    		  </div>
    		  	<input type="tel" class="input-text flex2 mobile-input black" placeholder="Mobile Number">
    		  
    		  <center>
            	<button class="updateinfo-btn" type="button" class="btn" style="width:50%;">Update</button>
          	  </center>
    		  
    		</form>
    	
      	</div>

      	<!--Content of Hotlines-->
      	<div class="hotlines-div">
      		<div style="margin-top:20px;" >
	          <b style="display:block;"><i class="icon-info-sign"></i>Other Emergency Hotlines</b><br>
	           <div style="padding:5px 5px 50px 5px;">
	              <a  class="btn hotline" data-number="8701920" style="width:100%; display:block; text-align:center;"><i class="icon-phone-sign">&nbsp;</i>870-1920</a>
	              <a  class="btn hotline" data-number="8701923" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1923</a>
	              <a  class="btn hotline" data-number="8701926" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1926</a>
	              <a  class="btn hotline" data-number="8701929" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1929</a>
	              <a class="btn hotline" data-number="8701932" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1932</a>
	              <a class="btn hotline" data-number="8701935" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1935</a>
	          </div>
	      </div>
      	</div>

    </div>

    <div class="dialogs">
      <!-- This is a requried container for your dialogs. All dialogs that you want to display in this page go here -->
    </div>

  </div>
  <script src="assets/js/jquery-2.0.0.min.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
<script type="text/javascript" charset="utf-8" src="assets/js/cordova-2.5.0.js"></script>
<script src="assets/js/action-bars.js" type="text/javascript"></script>
<script src="assets/js/gmaps.js" type="text/javascript"></script>
  <!-- <script src="assets/js/tabs.js"></script> -->
 
</body>
<script>

	//device initialization


	//map initialization	
	google.maps.event.addDomListener(window, 'load', initialize);
	
	
	$(document).ready(function(){
    	// alert(checkInternet());
	/*Transition of pages when tab is pressed.*/
		$(".info-div").hide();	
		$(".hotlines-div").hide();	
		$(".home-div").show();	
		
		$("#tab1").click(function(e){//show home-div

			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showHome(x);
		});
		$("#tab2").click(function(e){//show info-div
			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showInfo(x);	
		});
		$("#tab3").click(function(e){ //show hotlines-div
			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showHotlines(x);
		});

		$(".ebutton").click(function(e){
			e.preventDefault();
			state = $(this).attr('disabled');
			if(state){
				updateInfoAlert();
			}
		});

		$(".updateinfo-btn").click(function(){
			localStorage.info = "ok";
		});

		// $$(".ebutton").prop('disabled', false);
		// checkInfo();
	});

	//check internet connection of user thru server request
	function checkInternet(){
		//return true if internet is ok
		//return false if intenet is not ok
		var x = false;
		$.ajax({
			url : 'http://192.168.1.104:1337/check',
			type : "GET",
			dataType: "JSON",
			async : false,
			success: function(data){
				x = true;
			},
			error : function(err){
				x =  false;
			}
		});
		return x;
	}

	function updateInfoAlert(){
		alert("Please Update your Personal Details");
		// location.href = "#tab2";
		// $$("#tab2").addClass('active');
		$(".home-div").hide();	
		$(".hotlines-div").hide();	
		$(".info-div").show();	
	}

	//show home tab
	function showHome(x){
		$(".info-div").hide();	
		$(".hotlines-div").hide();	
		$(".home-div").show();
		$(".tab").parent().removeClass("active");
		$(x).parent().addClass("active");
		initialize(); //map initialization
	}

	//show info tab
	function showInfo(x){
		$(".home-div").hide();	
		$(".hotlines-div").hide();	
		$(".info-div").show();	
		$(".tab").parent().removeClass("active");
		$(x).parent().addClass("active");
	}

	//show hotlines tab
	function showHotlines(x){
		$(".home-div").hide();	
		$(".info-div").hide();	
		$(".hotlines-div").show();
		$(".tab").parent().removeClass("active");
		$(x).parent().addClass("active");
	}

	//sending emergency request to server
	/**
		request = emergency button
	**/
	function sendEmergency(request){
		var server = "";
		var data = {request : request, name : getUserInfo().name, age : getUserInfo().age, mobile :getUserInfo().mobile, lat : getMapInfo().lat, lng : getMapInfo().lng, address : getMapInfo().address };

		$.ajax({
			url : server,
			type : "POST",
			data : data,
			success :function(){

			}
		});
	}
	//setting user info 
	function setUserInfo(name, age, mobile){
		var userinfo = {name : name, age : age, mobile : mobile};
		localStorage.userinfo = JSON.stringify(userinfo);
	}


	//retrieve Map info from gmaps.js
	function getMapInfo(){
		return {lat : lat, lng : lng, address : address};
	}
	//retrieve user info from localStorage
	function getUserInfo(){
		return JSON.parse(localStorage.userinfo);
	}



</script>
 <script src="assets/js/fingerblast.js"></script>
  <script src="assets/js/prettify.js"></script>
 <script src="assets/js/documentation.js"></script>

</body>
</html>