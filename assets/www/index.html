<!DOCTYPE html>
<html>
<head>
	<title>Makati 168</title>
	<meta charset="utf-8" />
  	<meta name="format-detection" content="telephone=no" />
  	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<!-- <link rel="stylesheet" href="assets/css/bootstrap.min.css" type="text/css"> -->
	<link rel="stylesheet" href="assets/css/font.css" type="text/css">
	<link rel="stylesheet" href="assets/css/holo-dark/base.css">
	<link rel="stylesheet" href="assets/css/holo-dark/action-bars.css"> 
	<link rel="stylesheet" href="assets/css/holo-dark/animations.css">
	<link rel="stylesheet" href="assets/css/holo-dark/buttons.css">
	<link rel="stylesheet" href="assets/css/holo-dark/content.css">
	<link rel="stylesheet" href="assets/css/holo-dark/dialogs.css">
	<link rel="stylesheet" href="assets/css/holo-dark/forms.css">
	<link rel="stylesheet" href="assets/css/holo-dark/icomoon.css">
	<link rel="stylesheet" href="assets/css/holo-dark/lists.css">
	<link rel="stylesheet" href="assets/css/holo-dark/sliders.css">
	<link rel="stylesheet" href="assets/css/holo-dark/spinners.css">
	<link rel="stylesheet" href="assets/css/holo-dark/stack.css">
	<link rel="stylesheet" href="assets/css/holo-dark/tabs.css">
	<link rel="stylesheet" href="assets/css/holo-dark/toasts.css"> 
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
	
	<!--Custom CSS-->
	<style type="text/css">
		.content{
			color:black;
    		background-color:white;
			/*background: url("assets/images/binding_light/binding_light.png");*/
		}
		body .page{
			background: #FFF;
			color:#000;
		}

		header a i {
			color:white; 
			margin-top:5px;
		}
		
		.info-div, .hotlines-div{
			display: none;
			color:black;
		}
		.home-div{
			height:100%;
		}
		 #map-canvas{
		  	margin: 0;
	        padding: 0;
	        height: 50%;
	      
		}
		.ebutton{
			text-align: center;
			width:99%;
		}
		.info-div form label, .info-div form , .info-div form .flex-group input, .info-div form .flex-group ::-webkit-input-placeholder, .info-div form input::-webkit-input-placeholder {
			color: black;
		}
		.black{
			color: black;
		}
	</style>

</head>

<body>
<!--page-->
 <div class="page">

 	<!--header-->
 	
 	<header class="action-bar fixed-top">
 	<a href="javascript: void(0);" class="app-icon action">
 	  <i style="" class="fa fa-plus-square fa-lg"></i>
 	</a>
 	  <h1 class="title"> &nbsp;Makati 168</h1>
 	  <ul class="actions pull-right" style="margin-top:-2px;">

 	  
 	  <li><a href="" class="action" id="signout-btn" title="Signout" ><i class="fa fa-sign-out fa-lg"></i></a></li>
 	  	
 	  </ul>
 	</header>

 	<!--tab-->
    <nav class="tab-fixed">
	    <ul class="tab-inner">
	      <li  class="active"><a id="tab1" class="tab" data-tab="tab1" data-ignore="true">Home</a></li>
	      <li  class=""><a id="tab2" class="tab" data-tab="tab2" >Info</a></li>
	      <li  class=""><a id="tab3" class="tab"  data-tab="tab3">Hotlines</a></li>
	    </ul>
    </nav>
    
    <!--content -->
    <div class="content" >
    	
    	<!--Content of Home-->
    	
    	<div class="home-div" style="margin:0px;">
    		
    		<!--Map Container-->
    		 <div id="map-canvas"></div>
    		  <div id="non-btn-grp">
    		 <!--Address Container-->
    		 <div  style=" border-top: 5px solid #393696; border-bottom: 5px solid #393696;text-align:center;   padding:5px; background-color:#7976D6;">
    		 <span ><i class="fa fa-location-arrow"></i><small id="location" style="padding:0px;">Please wait...</small></span>
    		 </div>

    		 <b style="display:block; margin-left:10px"><i class="fa fa-exclamation-circle"></i> Choose a type of Emergency:</b>
    		 </div>
    		 <center id="button-grp">
    		 <button class="btn ambulance-btn ebutton" data-request="Ambulance" style=""><i class="fa fa-h-square">&nbsp;</i>Ambulance</button><br>
    		 <button class="btn police-btn ebutton" data-request="Police" style="" ><i class="fa fa-shield">&nbsp;</i>Police</button><br>
    		 <button class="btn fire-truck-btn ebutton"  data-request="Fire Truck" style=" "><i class="fa fa-fire">&nbsp;</i>Fire Truck</button><br> 
    		</center>
    		 
    		
    	</div>

    	<!--Content of Info-->
    	<div class="info-div" >
    	
    		<form class="form-flex inset" >
    		  <label class="block-label">Personal Info</label>
    		  
    		  	<input type="hidden" id="userid-input" >
    		    <input type="text" id="fname-input" placeholder="First Name" class="input-text">
    		     <input type="text" id="lname-input" placeholder="Last Name" class="input-text">
    		   
    		  
    		  <div class="flex-group">
    		  	<input type="tel" id="mobile-input" class="input-text flex2 mobile-input black" placeholder="Mobile Number">
    		  	<input style="width:30%;" id="age-input" type="age-input" maxlength="2"  placeholder="Age" class="input-text flex2">
    		  </div>
    		  <center>
            	<button class="updateinfo-btn" type="button" class="btn" style="width:50%;">Update</button>
          	  </center>
    		  
    		</form>
    	
      	</div>

      	<!--Content of Hotlines-->
      	<div class="hotlines-div">
      		<div style="margin-top:20px;" >
	          <b style="display:block;"><i class="icon-info-sign"></i>Other Emergency Hotlines</b><br>
	           <div style="padding:5px 5px 50px 5px;">
	              <a  class="btn hotline" data-number="8701920" style="width:100%; display:block; text-align:center;"><i class="icon-phone-sign">&nbsp;</i>870-1920</a>
	              <a  class="btn hotline" data-number="8701923" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1923</a>
	              <a  class="btn hotline" data-number="8701926" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1926</a>
	              <a  class="btn hotline" data-number="8701929" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1929</a>
	              <a class="btn hotline" data-number="8701932" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1932</a>
	              <a class="btn hotline" data-number="8701935" style="width:100%; display:block; text-align:center; margin-left:0.5px;"><i class="icon-phone-sign">&nbsp;</i>870-1935</a>
	          </div>
	      </div>
      	</div>

    </div>

    <div class="dialogs">
      <div id="dialog1" class="dialog">
      	<header class="dialog-title-region">
      		<h1 class="title">Hello</h1>
      	</header>
      	<div class="dialog-content">
      		<p>hi</p>
      	</div>
      	<ul class="dialog-actions">
      		<li><a href="javascript: void(0);" class="dialog-cancel-button">Cancel</a></li>
      		<li><a href="javascript: void(0);" class="dialog-ok-button">ok</a></li>

      	</ul>
      </div>

  </div>
<script src="assets/js/jquery-2.0.0.min.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
<script type="text/javascript" charset="utf-8" src="assets/js/cordova-2.5.0.js"></script>
<!-- <script src="assets/js/action-bars.js" type="text/javascript"></script> -->

<script src="assets/js/gmaps.js" type="text/javascript"></script>
<script src="assets/js/default.js" type="text/javascript"></script>


 
</body>
<script>

	//device initialization
	document.addEventListener("deviceready", onDeviceReady, false);
	document.addEventListener("backbutton", onBack, false);
	function onDeviceReady() {
		
	    checkConnection();
	  
	   
	}
	function onBack(){
		 navigator.app.exitApp();
	}

	function checkConnection() {
	    var networkState = navigator.connection.type;

	    var states = {};
	    states[Connection.UNKNOWN]  = 'Unknown connection';
	    states[Connection.ETHERNET] = 'Ethernet connection';
	    states[Connection.WIFI]     = 'WiFi connection';
	    states[Connection.CELL_2G]  = 'Cell 2G connection';
	    states[Connection.CELL_3G]  = 'Cell 3G connection';
	    states[Connection.CELL_4G]  = 'Cell 4G connection';
	    states[Connection.NONE]     = 'No network connection';

	    if(networkState != "none"){
	    	// checkInternet() then initialize
	    	if(checkInternet()){
	    		load();
	    		initialize();
	    		return true;
	    	}else{
	    		load();
	    		$("#location").html("No Internet Connection");
	    		return false;
	    	}
	    	
	    }else{
	    	load();
	    	$("#location").html("No Internet Connection");
	    	return false;
	    }
		
	}

	
	
	jQuery(function($){
		var homeHeight = parseFloat($(".home-div").height());
		var nonbuttonHeight = parseFloat($("#non-btn-grp").height());
		var mapHeight = parseFloat(homeHeight / 2);
		var availableHeight = mapHeight - nonbuttonHeight; 
		var buttonHeight = (availableHeight/3)-10;
		
		if(buttonHeight > 50){
			$(".ebutton").css("height", 50);
		}else{
			$(".ebutton").css("height", buttonHeight);
		}
		

		$("#tab1").click(function(e){//show home-div
			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showHome(x);
		});
		$("#tab2").click(function(e){//show info-div
			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showInfo(x);	
		});
		$("#tab3").click(function(e){ //show hotlines-div
			e.preventDefault();
			x = '#'+ $(this).attr('id');
			showHotlines(x);
		});
		$("#signout-btn").click(function(e){
			e.preventDefault();
			localStorage.session = "false";
			location.href = "login.html";
		});
		$("#userid-input").val(getUserInfo().userid);
		$("#fname-input").val(getUserInfo().firstname);
		$("#lname-input").val(getUserInfo().lastname);
		$("#age-input").val(getUserInfo().age);
		$("#mobile-input").val(getUserInfo().mobile);
		
		$(".ebutton").click(function(e){
			e.preventDefault();
			request = $(this).data("request");
			var ready = false;
			if(checkConnection()){ //check for internet connection

				
				if(checkUserStatus() == 'active'){ //check if user is active or blocked
					if(localStorage.location == "true"){ //check if location is in Makati
						sendEmergency(request);
					}else{
						alert("App is functional inside Makati Vicinity only.");
					}
					
				}else{
					alert("You are blocked by the Command Center");
				}
				
			}else{
				alert("Network Error");
				showHotlines("#tab3");
			}
			

		});
	});


	function load(){

		// localStorage.session = true;
		
    	// setUserInfo('0001','Jethro De Guzman', '21', '09228239751');
	/*Transition of pages when tab is pressed.*/
		$(".info-div").hide();	
		$(".hotlines-div").hide();	
		$(".home-div").show();	
		

	}

		// $(".updateinfo-btn").click(function(){
		// 	localStorage.info = "ok";
		// });

		// $$(".ebutton").prop('disabled', false);
		// checkInfo();
	// });

	//map initialization	
	// google.maps.event.addDomListener(window, 'load', initialize);




</script>
 <script src="assets/js/fingerblast.js"></script>
  <script src="assets/js/prettify.js"></script>
 <script src="assets/js/documentation.js"></script>

</body>
</html>